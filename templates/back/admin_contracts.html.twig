{% extends 'base.html.twig' %}

{% block title %}AMAP Pr√©-vert - Gestion des contrats{% endblock %}

{% block stylesheets %}
	<link rel="stylesheet" href="{{ asset('css/admin_contracts.css') }}">
{% endblock %}

{% block nav %}
	{% include 'back/admin_nav.html.twig' %}
{% endblock %}

{% block body %}
	<header class="container">
		<div class="row text-center">
			<div class="col-lg-12">
				<h2>Gestion des contrats</h2>
			</div>
		</div>
	</header>

	<section class="container mt-4 mb-4" id="contractsCrud">
		<table class="table">
			<thead class="thead-dark">
				<tr>
					<th>Nom du contrat</th>
					<th>Gestion du contrat</th>
				</tr>
			</thead>
			<tbody>
				{% for contract in contracts %}
					<tr>
						<td>Contrat {{ contract.name }}</td>
						<td>
							<a href="{{ path('contract.show', {id: contract.id}) }}" class="btn btn-success">Visualiser</a>
							<a href="{{ path('admin.contract.update', {id: contract.id}) }}" class="btn btn-warning">Modifier</a>
							<form method="POST" action="{{ path('admin.contract.delete', {id: contract.id}) }}" onsubmit="return confirm('Souhaitez-vous vraiment supprimer ce contrat?')">
								<input type="hidden" name="_method" value="delete">
								<input type="hidden" name="_token" value="{{ csrf_token('delete' ~ contract.id) }}">
								<button class="btn btn-danger">Supprimer</button>
							</form>
						</td>
					</tr>
				{% endfor %}
			</tbody>
		</table>

		<div class="text-left">
			<a href="{{ path('admin.contract.create') }}" class="btn btn-primary">Ajouter un nouveau contrat</a>
		</div>
	</section>

{% endblock %}

{% block javascripts %}
{% endblock %}